<script>
    const ADALO_API_KEY = "YOUR_ADALO_API_KEY";  // Replace with your actual API Key
    const USER_EMAIL = "testuser@example.com";   // Replace with logged-in user’s email (Dynamically fetched later)
    const ADALO_APP_ID = "YOUR_APP_ID";          // Replace with your Adalo App ID

    var audio = new Audio("https://listen.broadcastify.com/82m7nxfkt4hw6vd.mp3");
    var btn = document.getElementById("playPauseBtn");
    var volumeSlider = document.getElementById("volumeSlider");

    btn.addEventListener("click", function() {
        if (audio.paused) {
            audio.play();
            btn.innerHTML = "⏸ Pause";
        } else {
            audio.pause();
            btn.innerHTML = "▶ Play";
        }
    });

    volumeSlider.addEventListener("input", function() {
        audio.volume = volumeSlider.value;
    });

    function switchTab(tabName) {
        document.querySelectorAll(".content").forEach(c => c.classList.remove("active"));
        document.querySelectorAll(".tab").forEach(t => t.classList.remove("active"));

        document.getElementById(tabName).classList.add("active");
        document.querySelector(`.tab[onclick="switchTab('${tabName}')"]`).classList.add("active");

        if (tabName === "chat") {
            checkPremiumAccess();
        }
    }

    async function checkPremiumAccess() {
        try {
            let response = await fetch(`https://api.adalo.com/v0/apps/${ADALO_APP_ID}/collections/Users?filters=[{"field":"Email","operator":"equals","value":"${USER_EMAIL}"}]`, {
                headers: { "Authorization": `Bearer ${ADALO_API_KEY}` }
            });

            let data = await response.json();
            let user = data[0];

            if (user && user.IsPremium) {
                document.getElementById("chatFrame").src = "https://your-adalo-chat-url.com"; 
                document.getElementById("premiumMessage").style.display = "none";
            } else {
                document.getElementById("chatFrame").src = "";
                document.getElementById("premiumMessage").style.display = "block";
            }
        } catch (error) {
            console.error("Error fetching Adalo user data:", error);
        }
    }
</script>
